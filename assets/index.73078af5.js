var F=Object.defineProperty,E=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var k=(e,n,t)=>n in e?F(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,d=(e,n)=>{for(var t in n||(n={}))A.call(n,t)&&k(e,t,n[t]);if(y)for(var t of y(n))R.call(n,t)&&k(e,t,n[t]);return e},p=(e,n)=>E(e,T(n));import{m as _,l as c,a as C,V as f,b as w,B as V}from"./vendor.cc17e59c.js";const I=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};I();var M=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("fieldset",{staticClass:"pot p-1"},[t("legend",{staticClass:"p-1"},[e._v("pot...")]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("div",{staticClass:"art",class:[e.artClass]})]),t("div",{staticClass:"column"},[t("div",[e._v("temperature")]),t("b-progress",{attrs:{type:"is-danger",value:e.pot.temperature,"show-value":""}},[e._v(e._s(e.pot.temperature.toFixed(2))+" C")]),t("div",[e._v("state: "+e._s(e.pot.state))]),t("div",[e._v("mass: "+e._s(e.pot.mass)+"g")]),t("div",[e._v("joules: "+e._s(e.pot.joules.toFixed(2)))]),t("div",[e._v("joules / s: "+e._s(e.pot.joulesPerSecond.toFixed(2)))])],1)])])},O=[];function v(e,n,t,o,s,r,i,P){var a=typeof e=="function"?e.options:e;n&&(a.render=n,a.staticRenderFns=t,a._compiled=!0),o&&(a.functional=!0),r&&(a._scopeId="data-v-"+r);var u;if(i?(u=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(l=__VUE_SSR_CONTEXT__),s&&s.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(i)},a._ssrRegister=u):s&&(u=P?function(){s.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:s),u)if(a.functional){a._injectStyles=u;var q=a.render;a.render=function(j,h){return u.call(h),q(j,h)}}else{var g=a.beforeCreate;a.beforeCreate=g?[].concat(g,u):[u]}return{exports:e,options:a}}const B={name:"PotBlock",computed:p(d({},_(["pot"])),{artClass(){return"pot-"+this.pot.state}})},$={};var L=v(B,M,O,!1,K,null,null,null);function K(e){for(let n in $)this[n]=$[n]}var N=function(){return L.exports}(),U=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("fieldset",{staticClass:"fire p-1"},[t("legend",{staticClass:"p-1"},[e._v("fire...")]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("div",{staticClass:"art",class:[e.artClass]})]),t("div",{staticClass:"column"},[t("div",[e._v("state: "+e._s(e.fire.state))]),t("div",[e._v("fuel:")]),e._l(e.mappedFuel,function(o,s){return t("div",{key:s},[e._v(" "+e._s(s)+": "+e._s(o.length)+" ")])})],2)])])},H=[];const G={name:"FireBlock",computed:p(d({},_(["fire"])),{artClass(){return"fire-"+this.fire.state},mappedFuel(){return c.exports.groupBy(this.fire.fuel,"name")}})},b={};var X=v(G,U,H,!1,z,null,null,null);function z(e){for(let n in b)this[n]=b[n]}var W=function(){return X.exports}(),D=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("fieldset",{staticClass:"p-1 actions"},[t("legend",{staticClass:"p-1"},[e._v(e._s(e.title))]),e._l(e.items,function(o,s){return[o.unlocked?t("b-button",{key:s,staticClass:"m-1",on:{click:function(r){return e.trigger(o)}}},[e._v(e._s(o.name))]):e._e()]})],2)},J=[];const Q={name:"ActionList",props:{items:{required:!0,default(){return[]}},title:{required:!0,default(){return""}}},methods:d({},C(["trigger"]))},S={};var Y=v(Q,D,J,!1,Z,null,null,null);function Z(e){for(let n in S)this[n]=S[n]}var ee=function(){return Y.exports}(),te=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("section",{staticClass:"container"},[t("h1",{staticClass:"title p-4"},[e._v("a watched pot...")]),t("pre",{ref:"log",staticClass:"log"},[e._v(e._s(e.messages))]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column m-1"},[t("pot"),t("fire")],1),t("div",{staticClass:"column m-1"},[e._l(e.mappedActions,function(o,s){return[t("actions",{key:s,attrs:{items:o,title:s}})]}),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("fieldset",{staticClass:"p-1"},[t("legend",{staticClass:"p-1"},[e._v("inventory...")]),e._l(e.inventory,function(o,s){return t("div",{key:s},[e._v(" "+e._s(s)+": "+e._s(Math.floor(o.count))+" ")])})],2)]),t("div",{staticClass:"column"},[t("fieldset",{staticClass:"p-1"},[t("legend",{staticClass:"p-1"},[e._v("items...")]),e._l(e.items,function(o,s){return t("div",{key:s,staticClass:"columns"},[t("div",{staticClass:"column"},[e._v(e._s(s))]),t("div",{staticClass:"column"},[e._v("weight: "+e._s(o.weight))]),t("div",{staticClass:"column"},[e._v("decay: "+e._s(o.decay))])])})],2)])])],2)])])])])},ne=[];const se={name:"App",components:{Pot:N,Fire:W,Actions:ee},methods:d({},C(["tick","trigger"])),computed:p(d({},_(["actions","messages","inventory","items"])),{mappedActions(){var e=c.exports.filter(this.actions,n=>n.unlocked);return c.exports.groupBy(e,"type")}}),created(){setInterval(()=>{this.tick()},1e3)},watch:{messages(){this.$nextTick(()=>{this.$refs.log.scrollTop=this.$refs.log.scrollHeight})}}},x={};var oe=v(se,te,ne,!1,re,null,null,null);function re(e){for(let n in x)this[n]=x[n]}var ae=function(){return oe.exports}(),ie={watch:{type:"pot",name:"watch",unlocked:!0,count:0,messages:[`you watch the pot...
`,`you watch the pot some more...
`,`you continue watching the pot...
`]},blow:{type:"pot",name:"blow",unlocked:!1,count:0,requirement:{type:"actions",name:"watch",count:3},messages:[`you blow on the pot...
`,`you blow on the pot again...
`,`you blow on the pot and think you should look for another way...
`]},rub:{type:"fire",name:"rub",unlocked:!1,count:0,requirement:{type:"inventory",name:"sticks",count:2},handler:{name:"kindle",args:[{type:"inventory",name:"sticks",count:2,message:`you don't have two sticks to rub together...
`},{type:"inventory",name:"kindling",count:1,message:`you rub the sticks and see a brief flame...
`}]}},kindle:{type:"fire",name:"kindle",unlocked:!1,count:0,requirement:{type:"inventory",name:"kindling",count:5},handler:{name:"fuel",args:[{type:"inventory",name:"kindling",count:5}]}},place:{type:"fire",name:"place",unlocked:!1,count:0,requirement:{type:"fire",name:"state",notValue:"cold"},handler:{name:"fuel",args:[{type:"inventory",name:"sticks",count:1}]}},stack:{type:"fire",name:"stack",unlocked:!1,count:0,requirement:{type:"inventory",name:"logs",count:1},handler:{name:"fuel",args:[{type:"inventory",name:"logs",count:1}]}},look:{type:"environment",name:"look",unlocked:!1,count:0,requirement:{type:"actions",name:"blow",count:3},messages:[`you look around...
`,`you look around some more, but it is very dark...
`,`you take one last look and notice that you are surrounded by sticks and leaves...
`]},gather:{type:"environment",name:"gather",unlocked:!1,count:0,requirement:{type:"actions",name:"look",count:3},messages:[`you try to gather some sticks and leaves...
`],gains:[{type:"inventory",name:"kindling",count:2},{type:"inventory",name:"sticks",count:.2}]},chop:{type:"environment",name:"chop",requirement:{type:"fire",name:"state",notValue:"cold"},messages:[`you chop at a log, this is real work...
`],gains:[{type:"inventory",name:"logs",count:.1}]}};f.use(w);const le={Playing:"playing",Paused:"paused"},ce={Ice:"ice",Puddle:"puddle",Simmer:"simmer",Boil:"boil"},m={Cold:"cold",Kindled:"kindled",Crackling:"crackling",Roaring:"roaring"},ue=1,de=ue*3600;var me=new w.Store({state:{messages:"",ambientTemperature:22,gameState:le.Playing,time:{min:0,max:12*60*60,currentTime:0},pot:{state:ce.Ice,joules:-380,joulesPerSecond:0,min:-380,max:38e4,temperature:0,mass:1e3,specificHeatC:4.186},fire:{temp:0,state:m.Cold,fuel:[]},items:{kindling:{name:"kindling",decay:.1,weight:1},sticks:{name:"sticks",decay:1,weight:20},logs:{name:"logs",decay:1,weight:60}},inventory:{kindling:{count:0},sticks:{count:0},logs:{count:0}},actions:ie},mutations:{changeGameState(e,n){e.gameState=n}},actions:{async tick({state:e,dispatch:n}){if(e.pot.joulesPerSecond=(e.ambientTemperature-e.pot.temperature)/10,e.time.currentTime++,e.fire.state!==m.Cold){var t=0;c.exports.forEach(e.fire.fuel,s=>{var r=de*(s.weight/1e3);t+=r,s.weight-=s.decay}),e.pot.joulesPerSecond+=t,e.fire.fuel=c.exports.filter(e.fire.fuel,s=>s.weight>0)}e.pot.joules+=e.pot.joulesPerSecond;var o=e.pot.joules/(e.pot.specificHeatC*e.pot.mass);e.pot.temperature=o<0?0:o,e.fire.fuel.length===0&&(e.fire.state=m.Cold),await n("checkUnlocks")},async kindle({state:e},n){var t=!1;c.exports.forEach(n,o=>{if(o.count>e[o.type][o.name].count){e.messages+=o.message,t=!0;return}}),e.fire.state===m.Kindled&&(e.messages+=`there's no point when the fire is started...
`),!t&&e.fire.state!==m.Kindled&&(e.fire.state=m.Kindled,e.actions.chop.unlocked||(e.messages+=`with the fire lit, you see the glint of an axe blade...
`))},async handleMessages({state:e},n){n.messages&&n.messages[n.count]?e.messages+=n.messages[n.count]:n.messages&&(e.messages+=n.messages[0])},async addInventory({state:e},n){n.gains&&c.exports.forEach(n.gains,t=>{e[t.type][t.name].count+=t.count})},async removeInventory({state:e},n){var t=!1;return c.exports.forEach(n,o=>{if(o.count>e[o.type][o.name].count){t=!0;return}e[o.type][o.name].count-=o.count}),!t},async fuel({state:e,dispatch:n},t){var o=await n("removeInventory",t);if(!o){e.messages+=`you don't have enough for that...
`;return}c.exports.forEach(t,s=>{for(var r=e.items[s.name],i=0;i<s.count;i++)e.fire.fuel.push(Object.assign({},r))})},async trigger({dispatch:e},n){n.count++,await e("handleMessages",n),await e("addInventory",n),n.handler&&await e(n.handler.name,n.handler.args),await e("checkUnlocks")},async checkUnlocks({state:e}){Object.keys(e.actions).forEach(n=>{if(!e.actions[n].unlocked&&e.actions[n].requirement){var t=e[e.actions[n].requirement.type][e.actions[n].requirement.name];e.actions[n].requirement.count&&t.count>=e.actions[n].requirement.count&&(e.actions[n].unlocked=!0),e.actions[n].requirement.notValue&&t!==e.actions[n].requirement.notValue&&(e.actions[n].unlocked=!0)}})}}});f.use(V);f.config.productionTip=!1;new f({store:me,render:e=>e(ae)}).$mount("#app");
